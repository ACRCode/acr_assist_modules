<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="../../XML Schema/ACRAssist_xml_schema.rnc" type="application/relax-ng-compact-syntax"?>
<ReportingModule>
	<Metadata>
		<Label>ACR TI-RADS</Label>
		<ID>TI-RADS</ID>
		<SchemaVersion>2.0</SchemaVersion>
		<ModuleVersion>1.0</ModuleVersion>
		<CreatedDate>2018-12-31</CreatedDate>
    	<LastModifiedDate>2018-11-26</LastModifiedDate>
		<ApprovedBy>American College of Radiology</ApprovedBy>
		<ReviewedBy>American College of Radiology</ReviewedBy>
		<DevelopedBy>American College of Radiology</DevelopedBy>
		<Info>
			<Description>TI-RADS level determination</Description>
			<References>
                <Citation Url="https://nrdr.acr.org/lirads/">
                ACR LI-RADS</Citation>
			</References>
			<Diagrams>
				<Diagram DisplaySequence="1" IsKeyDiagram="true">
          <Location>keyimage.jpg</Location>
          <Label>TI-RADS</Label>
               </Diagram>
			</Diagrams>
			<Contact>
				<Name>ACR Assist</Name>
				<Email>acr-assist@acr.org</Email>
				<Institution>American College of Radiology</Institution>
			</Contact>
		</Info>
		<ReportCitationText>TI-RADS</ReportCitationText>
        <ApplicableSexes Value="Both"></ApplicableSexes>
	</Metadata>
	
	<DataElements>		
		<GlobalValue Id="conditionConst">10</GlobalValue>	
		
        <ChoiceDataElement Id="composition" IsRequired="true" DisplaySequence="1" CdeId="RDE65" Editable="true" Hasprefilled="false" Output="false">
			<Label>Composition</Label>
			<ChoiceInfo>
				<Choice>
					<Value>0</Value>
					<Label>0-Cystic or almost completely cystic</Label>	
				</Choice>
				<Choice>
					<Value>0</Value>
					<Label>0-Spongiform</Label>
				</Choice>
				<Choice>
					<Value>1</Value>
					<Label>1-Mixed cystic and solid</Label>
				</Choice>
				<Choice>
					<Value>2</Value>
					<Label>2-Solid or almost completely solid</Label>
				</Choice>
			</ChoiceInfo>
		</ChoiceDataElement>
		
	     <ChoiceDataElement Id="echogenicity" IsRequired="true" DisplaySequence="2" CdeId="RDE65" Editable="true" Hasprefilled="false" Output="false">
			<Label>Echogenicity</Label>
			<ChoiceInfo>
				<Choice>
					<Value>0</Value>
					<Label>0-Anechoic</Label>	
				</Choice>
				<Choice>
					<Value>1</Value>
					<Label>1-Hyperechoic or isoechoic</Label>
				</Choice>
				<Choice>
					<Value>2</Value>
					<Label>2-Hypoechoic</Label>
				</Choice>
				<Choice>
					<Value>3</Value>
					<Label>3-Very hypoechoic</Label>
				</Choice>
			</ChoiceInfo>
		</ChoiceDataElement>
		
		<ChoiceDataElement Id="shape" IsRequired="true" DisplaySequence="3" CdeId="RDE65" Editable="true" Hasprefilled="false" Output="false">
			<Label>Shape</Label>
			<ChoiceInfo>
				<Choice>
					<Value>0</Value>
					<Label>0-Wider-than-tall</Label>	
				</Choice>
				<Choice>
					<Value>1</Value>
					<Label>1-Hyperechoic or isoechoic</Label>
				</Choice>
				<Choice>
					<Value>3</Value>
					<Label>3-Taller-than-wide</Label>
				</Choice>
			
			</ChoiceInfo>
		</ChoiceDataElement>		
		
		<ChoiceDataElement Id="margin" IsRequired="true" DisplaySequence="4" CdeId="RDE65" Editable="true" Hasprefilled="false" Output="false">
			<Label>Margin</Label>
			<ChoiceInfo>
				<Choice>
					<Value>0</Value>
					<Label>0-Smooth</Label>	
				</Choice>
				<Choice>
					<Value>0</Value>
					<Label>0-Ill-defined</Label>
				</Choice>
				<Choice>
					<Value>2</Value>
					<Label>2-Lobulated or irregular</Label>
				</Choice>
				<Choice>
				    <Value>3</Value>
					<Label>3-Extra-thyroidal extension</Label>
				</Choice>
			</ChoiceInfo>
		</ChoiceDataElement>		
		
		<MultiChoiceDataElement Id="echogenicfoci" IsRequired="true" DisplaySequence="5" CdeId="RDE65" Editable="true" Hasprefilled="false" Output="false">
			<Label>Echogenic Foci</Label>
			<ChoiceInfo>
				<Choice>
					<Value>0</Value>
					<Label>0-None or large comet-tail artifacts</Label>	
				</Choice>
				<Choice>
					<Value>1</Value>
					<Label>1-Macrocalcifications</Label>
				</Choice>
				<Choice>
					<Value>2</Value>
					<Label>2-Peripheral rim calcifications</Label>
				</Choice>
				<Choice>
					<Value>3</Value>
					<Label>3-Punctate echogenic focci</Label>
				</Choice>
			</ChoiceInfo>
		</MultiChoiceDataElement>
		
		<NumericDataElement Id="diameter" IsRequired="true" DisplaySequence="6" CdeId="RDE65" Editable="true" Hasprefilled="false" Output="false">
		   <Label>Diameter</Label>
			<Hint>Use 0-5 scale</Hint>
			<Minimum>0.5</Minimum>
			<Maximum>5</Maximum>
		</NumericDataElement>	
		
	
		<ComputedDataElement Id="addtr1">
			<DecisionPoint>
				<Branch>
					<AndCondition>
						<GreaterThanOrEqualsCondition DataElementId="composition" ComparisonValue="0"/>
						<GreaterThanOrEqualsCondition DataElementId="echogenicity" ComparisonValue="0"/>
						<GreaterThanOrEqualsCondition DataElementId="shape" ComparisonValue="0"/>
						<GreaterThanOrEqualsCondition DataElementId="margin" ComparisonValue="0"/>
						<OrCondition>
							<ContainsCondition DataElementId="echogenicfoci" ComparisonValue="0"/>
							<ContainsCondition DataElementId="echogenicfoci" ComparisonValue="1"/>
							<ContainsCondition DataElementId="echogenicfoci" ComparisonValue="2"/>						
							<ContainsCondition DataElementId="echogenicfoci" ComparisonValue="3"/>
						</OrCondition>
					</AndCondition>
					<ArithmeticExpression>{composition} + {echogenicity} + {shape} + {margin} + {echogenicfoci}</ArithmeticExpression>
				</Branch>
			</DecisionPoint>
		</ComputedDataElement>				
	</DataElements>	
	
	<Rules>	
        <DecisionPoint Id="decisionPointAddtr1">
          <Label>0points</Label>
          <Branch>
			  <Label>0 points TR1</Label>
			  <EqualCondition DataElementId="addtr1" ComparisonValue="0"/>
			  <EndPointRef EndPointId="ReporttextTR1"></EndPointRef>
          </Branch>
		  <Branch>
			  <Label>2 points TR2</Label>
			  <EqualCondition DataElementId="addtr1" ComparisonValue="2"/>
			  <EndPointRef EndPointId="ReporttextTR2"></EndPointRef>
          </Branch>
		  <Branch>
			  <Label>3 points TR3</Label>
			  <EqualCondition DataElementId="addtr1" ComparisonValue="3"/>
			  <EndPointRef EndPointId="ReporttextTR3"></EndPointRef>
          </Branch>
		  <Branch>
			  <Label>4 points TR4</Label>
			  <OrCondition>
				<EqualCondition DataElementId="addtr1" ComparisonValue="4"/>
				<EqualCondition DataElementId="addtr1" ComparisonValue="5"/>
				<EqualCondition DataElementId="addtr1" ComparisonValue="6"/>	
			  </OrCondition>
			  <EndPointRef EndPointId="ReporttextTR4"></EndPointRef>
          </Branch>
		  <Branch>
			  <Label>5 points TR5</Label>
			  <GreaterThanOrEqualsCondition DataElementId="addtr1" ComparisonValue="7"/>
			  <EndPointRef EndPointId="ReporttextTR5"></EndPointRef>
		  </Branch>
        </DecisionPoint> 		
	</Rules>	
	
	<EndPoints>
	 <EndPoint Id="ReporttextTR1">
	  <Label>Benign noFNA</Label>
      <ReportTexts >
        <ReportText SectionId="findings">TR1:&amp;nbsp;
		 Benign no FNA</ReportText>
      </ReportTexts>
      </EndPoint>	
	  	 <EndPoint Id="ReporttextTR2">
	  <Label>NotSuspicious noFNA</Label>
      <ReportTexts >
        <ReportText SectionId="findings">TR2:&amp;nbsp;
		Not Suspicious&amp;nbsp;
		no FNA</ReportText>
      </ReportTexts>
      </EndPoint>	
	  	 <EndPoint Id="ReporttextTR3">
	  <Label>Mildly noFNA</Label>
      <ReportTexts >
        <ReportText SectionId="findings">TR3:&amp;nbsp;
		Mildly Suspicious&amp;nbsp; 
		<SectionIfValue DataElementId="diameter" ComparisonValue="2.5"> FNA </SectionIfValue>
		<SectionIfValue DataElementId="diameter" ComparisonValue="1.5"> Follow</SectionIfValue>
        </ReportText>
      </ReportTexts>
      </EndPoint>	
	  	 <EndPoint Id="ReporttextTR4">
	  <Label>Moderately noFNA</Label>
      <ReportTexts >
        <ReportText SectionId="findings">TR4:&amp;nbsp;
		Moderately Suspicious&amp;nbsp;
		<SectionIfValue DataElementId="diameter" ComparisonValue="1.5"> FNA </SectionIfValue>
		<SectionIfValue DataElementId="diameter" ComparisonValue="1"> Follow</SectionIfValue>
        </ReportText>
      </ReportTexts>
      </EndPoint>	
	  	 <EndPoint Id="ReporttextTR5">
	  <Label>Highly noFNA</Label>
      <ReportTexts >
        <ReportText SectionId="findings">TR5:&amp;nbsp;
		Highly Suspicious&amp;nbsp;
		<SectionIfValue DataElementId="diameter" ComparisonValue="1"> FNA </SectionIfValue>
		<SectionIfValue DataElementId="diameter" ComparisonValue="0.5"> Follow</SectionIfValue>
        </ReportText>
      </ReportTexts>
      </EndPoint>	
	</EndPoints>
	
</ReportingModule>
